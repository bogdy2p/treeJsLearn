<!DOCTYPE html>
<html lang="en">
    <head>
        <title>three.js webgl - InnoKin Sketch</title>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
        <style>
            body {
                color: #cccccc;
                font-family:Monospace;
                font-size:13px;
                text-align:center;

                background-color: #000000;
                margin: 0px;
                overflow: hidden;
            }

            #info {
                position: absolute;
                top: 0px; width: 100%;
                padding: 5px;
            }

            a {

                color: #0080ff;
            }

            #leftcontrols {
                position: absolute;
                bottom: 0px; width: 100%;
                height: 30px;
                padding: 5px;
                background-color: #FF66FF;
                /*z-index: 1000;*/
            }
            #container{
                position: absolute; left:0px; top:0px;
            }
        </style>
    </head>
    <body>

        <div id="container"></div>
        <div id="info">
            <a href="http://threejs.org" target="_blank">three.js</a> webgl - Innoking sketch  - by <a href="https://twitter.com/fernandojsg">ThePBC</a>
        </div>
        <div id ="leftcontrols">

            <button id="btn1" onclick="removeBattery();">Button1-RemoveBattery</button>

            <button id="btn2" onclick="test();">TEST</button>
            <button id="btn3" onclick="butonmic1();">Button mic 1</button>
            <button id="btn4" onclick="displayDisruptorOptions();">DisplayDisruptorOptions</button>
            <button id="btn5" onclick="sticlaAction();">STICLA</button>
            <button id="btn6" onclick="disrupter();">DISRUPTOR</button>





            aAAAAAAAAAAAAAAAAAAAAAA
        </div>
        <div id ="rightcontrols"></div>


        <!--<script src="js/libs/dat.gui.min.js"></script>-->
        <script src="js/three.min.js"></script>
        <script type="text/javascript" src="js/RequestAnimationFrame.js"></script>
        <script src="js/OrbitControls.js"></script>
        <script src="js/libs/stats.min.js"></script>
        <script src ="js/ColladaLoader.js"></script>
        <script src="js/Tween.js"></script>
        <script src="dat-gui/build/DAT.GUI.js"></script>

        <script>

                var group, grupFiltru, grupBaterie, group2, group3;


                var disruptor;
                var battery;
                var container, mapCanvas;
                var controls, controls2;
                var camera, mapCamera, scene, renderer, raycaster;
                var positions, colors;
                var linesMesh;
                var mouseX = 0, mouseY = 0;
                var mouseXOnMouseDown = 0;
                var SCREEN_WIDTH, SCREEN_HEIGHT;
                var targetRotation = 0;
                var startButton, minusButtonCylinder, plusButtonCylinder, filtruTigara, chargerCube, disrupterCube;
                var targetRotationOnMouseDown = 0;
                var windowHalfX = window.innerWidth / 2;
                var windowHalfY = window.innerHeight / 2;
                var pointLight;


                var chargerMaterial;

//                var duration1 = 1000; //miliseconds
//                var duration2 = 2000; //miliseconds
//                var duration3 = 3000; //miliseconds
//                var duration4 = 4000; //miliseconds
//                var duration5 = 5000; //miliseconds
//                var currentTime;

                var tweenBatteryOut, tweenBatteryIn, tweenBatteryUp, tweenBatteryDown;
                var startTime = Date.now();


                var userOpts = {
                    liftoff: 20,
                    range: 2000,
                    duration: 1500,
                    delay: 0,
                    easing: 'Exponential.EaseIn',
                    quintic_in: 'Quintic.EaseOut',
                }


                document.addEventListener('mousemove', onDocumentMouseMove, false);
                init();
                animate();

                function setupTweenBatteryOut()
                {
                    batteryGroup = scene.getObjectByName("grupBaterie");

                    var update = function () {
                        batteryGroup.position.y = current.y;
                        batteryGroup.position.x = current.x;
                        batteryGroup.position.z = current.z;
                    }
                    console.log("Battery Current Position");
                    console.log(batteryGroup.position);
                    var current = {x: 0, y: 0, z: -20};

                    // remove previous tweens if needed
                    TWEEN.removeAll();

                    var easing2 = TWEEN.Easing[userOpts.easing.split('.')[0]][userOpts.easing.split('.')[1]];

                    // build the tween lift the battery from the support
                    tweenBatteryUp = new TWEEN.Tween(current)
                            .to({z: +userOpts.liftoff}, userOpts.duration / 2)
                            .delay(userOpts.delay)
                            .easing(easing2)
                            .onUpdate(update);
                    tweenBatteryOut = new TWEEN.Tween(current)
                            .to({x: +userOpts.range}, userOpts.duration)
                            .delay(userOpts.delay)
                            .easing(easing2)
                            .onUpdate(update);
                    tweenBatteryUp.chain(tweenBatteryOut);

                    // start the first
                }

                function setupTweenBatteryIn()
                {
                    var complete = function () {
                        console.log("BATTERY ATTACHED. PLAYING A CLICK SOUND !");
                        setTimeout(function () {
//                            alert("PLAYING CLICK SOUND NOW");
                        }, 300);
                    }

                    var update = function () {
                        batteryGroup.position.x = current.x;
                        batteryGroup.position.y = current.y;
                        batteryGroup.position.z = current.z;
                    }
                    var current = {x: 2000, y: userOpts.liftoff, z: -20};

                    // remove previous tweens if needed
                    TWEEN.removeAll();

                    // convert the string from dat-gui into tween.js functions 
                    var easing = TWEEN.Easing[userOpts.easing.split('.')[0]][userOpts.easing.split('.')[1]];

                    var quintic = TWEEN.Easing[userOpts.quintic_in.split('.')[0]][userOpts.quintic_in.split('.')[1]];
                    // build the tween to go ahead
                    tweenBatteryIn = new TWEEN.Tween(current)
                            .to({x: 0, y: 0, z: 0}, userOpts.duration)
                            .delay(userOpts.delay)
                            .easing(quintic)
                            .onUpdate(update);
                    // build the tween to go backward
                    tweenBatteryDown = new TWEEN.Tween(current)
                            .to({x: 0, y: 0, z: -20}, userOpts.duration / 2)
                            .delay(userOpts.delay)
                            .easing(easing)
                            .onUpdate(update)
                            .onComplete(complete);
                    tweenBatteryIn.chain(tweenBatteryDown);
                    // after tweenHead do tweenBack
//                    tweenHead.chain(tweenBack);
                    // after tweenBack do tweenHead, so it is cycling
//                    tweenBack.chain(tweenHead);
                }

                function setupTweenFilterRotate()
                {
                    var update = function () {
                        filtruTigara.rotation.y = current.rotY;
                        filtruTigara.position.x = current.x;
                        filtruTigara.position.y = current.y;
                    }
                    var current = {x: 2000, y: userOpts.liftoff, rotY: 0};

                    // remove previous tweens if needed
                    TWEEN.removeAll();

                    // convert the string from dat-gui into tween.js functions 
                    var easing = TWEEN.Easing[userOpts.easing.split('.')[0]][userOpts.easing.split('.')[1]];

                    var quintic = TWEEN.Easing[userOpts.quintic_in.split('.')[0]][userOpts.quintic_in.split('.')[1]];
//                    console.log(easing);
                    // build the tween to go ahead
//                    tweenFilterRotate = new TWEEN.Tween(current)
//                            .to({x: 15, y: userOpts.liftoff}, userOpts.duration)
//                            .delay(userOpts.delay)
//                            .easing(quintic)
//                            .onUpdate(update);
                    // build the tween to go backward
//                    tweenBatteryDown = new TWEEN.Tween(current)
//                            .to({x: 15, y: 0}, userOpts.duration / 2)
//                            .delay(userOpts.delay)
//                            .easing(easing)
//                            .onUpdate(update);
//                    var tweenBack = new TWEEN.Tween(current)
//                            .to({x: -userOpts.range}, userOpts.duration)
//                            .delay(userOpts.delay)
//                            .easing(easing)
//                            .onUpdate(update);
//                    tweenBatteryIn.chain(tweenBatteryDown);
                    // after tweenHead do tweenBack
//                    tweenHead.chain(tweenBack);
                    // after tweenBack do tweenHead, so it is cycling
//                    tweenBack.chain(tweenHead);

                    // start the first
//                    tweenHead.start();
                }

                function setupTweenFilterGoUp()
                {
                    // 
                    var update = function () {
                        chargerCube.position.x = current.x;
                        chargerCube.position.y = current.y;
                    }
                    var current = {x: 2000, y: userOpts.liftoff};

                    // remove previous tweens if needed
                    TWEEN.removeAll();

                    // convert the string from dat-gui into tween.js functions 
                    var easing = TWEEN.Easing[userOpts.easing.split('.')[0]][userOpts.easing.split('.')[1]];

                    var quintic = TWEEN.Easing[userOpts.quintic_in.split('.')[0]][userOpts.quintic_in.split('.')[1]];
//                    console.log(easing);
                    // build the tween to go ahead
                    tweenBatteryIn = new TWEEN.Tween(current)
                            .to({x: 15, y: userOpts.liftoff}, userOpts.duration)
                            .delay(userOpts.delay)
                            .easing(quintic)
                            .onUpdate(update);
                    // build the tween to go backward
                    tweenBatteryDown = new TWEEN.Tween(current)
                            .to({x: 15, y: 0}, userOpts.duration / 2)
                            .delay(userOpts.delay)
                            .easing(easing)
                            .onUpdate(update);
//                    var tweenBack = new TWEEN.Tween(current)
//                            .to({x: -userOpts.range}, userOpts.duration)
//                            .delay(userOpts.delay)
//                            .easing(easing)
//                            .onUpdate(update);
                    tweenBatteryIn.chain(tweenBatteryDown);
                    // after tweenHead do tweenBack
//                    tweenHead.chain(tweenBack);
                    // after tweenBack do tweenHead, so it is cycling
//                    tweenBack.chain(tweenHead);

                    // start the first
//                    tweenHead.start();
                }

                function setupTweenFilterGoOut()
                {
                    // 
                    var update = function () {
                        chargerCube.position.x = current.x;
                        chargerCube.position.y = current.y;
                    }
                    var current = {x: 2000, y: userOpts.liftoff};

                    // remove previous tweens if needed
                    TWEEN.removeAll();

                    // convert the string from dat-gui into tween.js functions 
                    var easing = TWEEN.Easing[userOpts.easing.split('.')[0]][userOpts.easing.split('.')[1]];

                    var quintic = TWEEN.Easing[userOpts.quintic_in.split('.')[0]][userOpts.quintic_in.split('.')[1]];
//                    console.log(easing);
                    // build the tween to go ahead
                    tweenBatteryIn = new TWEEN.Tween(current)
                            .to({x: 15, y: userOpts.liftoff}, userOpts.duration)
                            .delay(userOpts.delay)
                            .easing(quintic)
                            .onUpdate(update);
                    // build the tween to go backward
                    tweenBatteryDown = new TWEEN.Tween(current)
                            .to({x: 15, y: 0}, userOpts.duration / 2)
                            .delay(userOpts.delay)
                            .easing(easing)
                            .onUpdate(update);
                    colladaLoader
//                    var tweenBack = new TWEEN.Tween(current)
//                            .to({x: -userOpts.range}, userOpts.duration)
//                            .delay(userOpts.delay)
//                            .easing(easing)
//                            .onUpdate(update);
                    tweenBatteryIn.chain(tweenBatteryDown);
                    // after tweenHead do tweenBack
//                    tweenHead.chain(tweenBack);
                    // after tweenBack do tweenHead, so it is cycling
//                    tweenBack.chain(tweenHead);

                    // start the first
//                    tweenHead.start();
                }

                function init() {
                    scene = new THREE.Scene();
                    container = document.getElementById('container');
//                    mapCanvas = document.getElementById('mapCanvas');

                    SCREEN_WIDTH = window.innerWidth;
                    SCREEN_HEIGHT = window.innerHeight;
                    var ASPECT_RATIO = SCREEN_WIDTH / SCREEN_HEIGHT;
                    camera = new THREE.PerspectiveCamera(50, ASPECT_RATIO, 1, 400);
                    camera.position.x = 100;
                    camera.position.z = 100;
                    camera.position.y = 100;
                    scene.add(camera);

//                    mapCamera = new THREE.PerspectiveCamera(45, ASPECT_RATIO, 1, 1000);
//                    mapCamera.position.x = 500;
//                    mapCamera.position.z = 450;
//                    mapCamera.position.y = 500;
//                    scene.add(mapCamera);
                    var customZoom = 0.1;
                    mapCamera = new THREE.OrthographicCamera(
                            -640 * customZoom, // Left
                            640 * customZoom, // Right
                            360 * customZoom, // Top
                            -360 * customZoom, // Bottom
                            -2000, // Near 
                            2000);           			// Far 
                    mapCamera.up = new THREE.Vector3(0, -1, 0);
                    mapCamera.lookAt(new THREE.Vector3(0, 1, 0));

                    mapCamera.position.x = 450;
                    mapCamera.position.z = 450;




                    raycaster = new THREE.Raycaster();
//                    raycaster.precision = 100;
                    // LIGHTS

                    controls = new THREE.OrbitControls(camera, container);
                    controls.noZoom = false;
                    controls.minDistance = 15;
                    controls.maxDistance = 180;
                    controls.noPan = true;

//                    controls2 = new THREE.OrbitControls(mapCamera, container);
//                    controls2.noPan = true;
//                    controls2.noZoom = true;


                    var luminaDirectionala1 = new THREE.DirectionalLight(0xffffff, 0.4);
                    luminaDirectionala1.position.set(600, 600, 600);
                    luminaDirectionala1.name = "luminaDirectionala1";
                    scene.add(luminaDirectionala1);
                    var luminaDirectionala2 = new THREE.DirectionalLight(0xffffff, 0.4);
                    luminaDirectionala2.position.set(600, -600, 600);
                    luminaDirectionala2.name = "luminaDirectionala2";
                    scene.add(luminaDirectionala2);

                    pointLight = new THREE.PointLight(0xcccccc, 0.5);
                    pointLight.position.set(20, 20, 20);
                    scene.add(pointLight);
                    group = new THREE.Group();
                    group.name = "grupPrincipal";
                    scene.add(group);

                    grupFiltru = new THREE.Group();
                    grupFiltru.name = "grupFiltru";
                    scene.add(grupFiltru);
                    grupBaterie = new THREE.Group();
                    grupBaterie.name = "grupBaterie";
                    scene.add(grupBaterie);

                    //load the 3d Model files
                    //////////////////////////////////////////////
                    load3Dmodels();
                    //////////////////////////////////////////////
                    // Add Charger 
                    //Grosime,Lungime,Latime
                    setTimeout(function () {
                        basicColorize();
//                        displayDisruptorOptions();
                    }, 2800);

//                    var axisHelper = new THREE.AxisHelper(555);
//                    scene.add(axisHelper);


                    renderer = new THREE.WebGLRenderer({antialias: true});
                    renderer.setClearColor(0x555555, 1);
                    renderer.setPixelRatio(window.devicePixelRatio);
                    renderer.setSize(window.innerWidth, window.innerHeight);
                    renderer.gammaInput = true;
                    renderer.gammaOutput = true;
                    container.appendChild(renderer.domElement);
                    renderer.domElement.addEventListener('mousedown', onDocumentMouseDown, false);
                    renderer.domElement.addEventListener('touchstart', onDocumentTouchStart, false);
                    renderer.domElement.addEventListener('touchmove', onDocumentTouchMove, false);
                    window.addEventListener('resize', onWindowResize, false);
                    renderer.autoClear = false;
                }

                function onWindowResize() {

                    windowHalfX = window.innerWidth / 2;
                    windowHalfY = window.innerHeight / 2;
                    camera.aspect = window.innerWidth / window.innerHeight;
                    camera.updateProjectionMatrix();
                    renderer.setSize(window.innerWidth, window.innerHeight);
                }

                function animate() {



                    requestAnimationFrame(animate);
                    render();
                    TWEEN.update();

                }

                function onDocumentMouseDown(event) {
                    event.preventDefault();
                    renderer.domElement.addEventListener('mousemove', onDocumentMouseMove, false);
                    renderer.domElement.addEventListener('mouseup', onDocumentMouseUp, false);
                    renderer.domElement.addEventListener('mouseout', onDocumentMouseOut, false);

                    var mouseVector = new THREE.Vector3();
                    mouseVector.x = 2 * (event.clientX / SCREEN_WIDTH) - 1;
                    mouseVector.y = 1 - 2 * (event.clientY / SCREEN_HEIGHT);
//                    mouseVector.z = 40;

//                    console.log(mouseVector);
//                    console.log(event);
//                    console.log(raycaster.precision);
                    raycaster.setFromCamera(mouseVector, camera);
                    console.log(raycaster);
                    console.log(camera);
                    console.log(mouseVector);
                    var intersectedObjects = raycaster.intersectObjects(scene.children, true);
                    console.log(intersectedObjects);
                    if (intersectedObjects.length > 0) {

                        var Object = intersectedObjects[0];
                        console.log(Object.object.id);
                        switch (Object.object.id) {

                            case 8:
                                console.log("That's the battery mate!");
                                break;
                            case 9:
                                console.log("You clicked the disruptor");
                                break;
                            case 10:
                                console.log("Lighter should START");
                                startButtonClick();

                                break;
                            case 11:
                                console.log("You pressed the +");
                                plusButtonClick();

                                break;
                            case 12:
                                console.log("You pressed the -");
                                minusButtonClick();
                                break;
                            case 13:
                                console.log("Why did you click the screen ?");
                                break;
                            case 14:
                                console.log("Why click the Filter ?");
                                break;
                            default:
                                console.log("nothing clicked");
                                break;
                        }

                    }


                }



                function onDocumentMouseMove(event) {

                    mouseX = event.clientX - windowHalfX;
                    targetRotationX = targetRotationOnMouseDown + (mouseX - mouseXOnMouseDown) * 0.002;
                }

                function onDocumentMouseUp(event) {
                    renderer.domElement.addEventListener('mousemove', onDocumentMouseMove, false);
                    renderer.domElement.addEventListener('mouseup', onDocumentMouseUp, false);
                    renderer.domElement.addEventListener('mouseout', onDocumentMouseOut, false);
                    resetButtonPositions();
                }

                function onDocumentMouseOut(event) {
                    renderer.domElement.addEventListener('mousemove', onDocumentMouseMove, false);
                    renderer.domElement.addEventListener('mouseup', onDocumentMouseUp, false);
                    renderer.domElement.addEventListener('mouseout', onDocumentMouseOut, false);
                }

                function onDocumentTouchStart(event) {
//                    alert("TOUCH DETECTED");
//                    alert(event);
                }

                function onDocumentTouchMove(event) {
//                    alert("TOUCH MOVEMENT DETECTED");
                }

                function startButtonClick() {

                    console.log("ENTERED STARTBUTTON CLICKED");
                    startButton.position.x += 1;
                }

                function plusButtonClick() {
                    console.log("plusbuttonclick function");
                    plusButtonCylinder.position.x += 1;
                }

                function minusButtonClick() {
                    console.log("Minusbutton click function");
                    minusButtonCylinder.position.x += 1;
                }

                function resetButtonPositions() {

//                    startButton.position.x = -7;
//                    minusButtonCylinder.position.x = -7;
//                    plusButtonCylinder.position.x = -7;

                }

                function render() {

                    var rotationSpeed = 10;
                    boxRed = scene.getObjectByName("RedBox");
                    boxGreen = scene.getObjectByName("GreenBox");
                    boxBlue = scene.getObjectByName("BlueBox");
//                    boxRed = scene.children[7];
                    if (boxRed) {
                        boxRed.rotation.x += 0.001 * rotationSpeed;
                        boxRed.rotation.y += 0.001 * rotationSpeed;
                    }

                    if (boxGreen) {
                        boxGreen.rotation.x += 0.001 * rotationSpeed;
                        boxGreen.rotation.z += 0.001 * rotationSpeed;
                    }

                    if (boxBlue) {
                        boxBlue.rotation.x += 0.001 * rotationSpeed;
                        boxBlue.rotation.y -= 0.001 * rotationSpeed;
                    }
//
                    var newlightposition = camera.position;
                    pointLight.position.set(camera.position.x, camera.position.y, camera.position.z);


                    var SCREEN_WIDTH = window.innerWidth, SCREEN_HEIGHT = window.innerHeight;
                    camera.aspect = SCREEN_WIDTH / SCREEN_HEIGHT;
                    mapCamera.aspect = SCREEN_WIDTH / SCREEN_HEIGHT;
//                    camera.updateProjectionMatrix();
//                    mapCamera.updateProjectionMatrix();

                    // setViewport parameters:
                    //  lower_left_x, lower_left_y, viewport_width, viewport_height

                    renderer.setViewport(0, 0, SCREEN_WIDTH, SCREEN_HEIGHT);
                    renderer.clear();

                    // right side
                    renderer.setViewport(0.80 * SCREEN_WIDTH + 1, 600, 0.20 * SCREEN_WIDTH - 2, SCREEN_HEIGHT / 4 - 2);
                    renderer.render(scene, mapCamera);

                    // left side
                    renderer.setViewport(1, 1, SCREEN_WIDTH - 2, SCREEN_HEIGHT - 2);
                    renderer.render(scene, camera);



                }


                function removeBattery() {
                    console.log(batterySupport.position);
                    setupTweenBatteryOut();
                    setupTweenBatteryIn();
                    tweenBatteryUp.start();
                    setTimeout(function () {
                        var newChargerMaterial = new THREE.MeshPhongMaterial({color: 0xFF6677, shininess: 30, specular: 0x990000, metal: true, side: THREE.DoubleSide});
                        console.log(batterySupport);
                        batterySupport.children[0].children[0].material = newChargerMaterial;
                    }, 2400);
                    setTimeout(function () {
                        tweenBatteryOut.stop();
                        tweenBatteryIn.start();
                    }, 3000);
                    setTimeout(function () {
                        tweenBatteryIn.stop();
                    }, 4700);
                    setTimeout(function () {
//                        alert("Click sound");
                    }, 5200);
                }

                function removeFilter() {

                    setupTweenFilterRotate();
                    setupTweenFilterGoUp();
                    setupTweenFilterGoOut();

                }


                function test() {

                    console.log(scene);

//                    var linemat = new THREE.LineBasicMaterial({color: 0x0055FF});
//
//                    var geometry = new THREE.Geometry();
//                    geometry.vertices.push(camera.position);
//                    geometry.vertices.push(new THREE.Vector3(25, 25, 25));
////                    geometry.vertices.push(new THREE.Vector3(100, 0, 0));
////                    geometry.vertices.push(new THREE.Vector3(100, 50, 0));
////                    geometry.vertices.push(new THREE.Vector3(100, 0, 40));
//
//                    var line = new THREE.Line(geometry, linemat);
//
////                    cameraGroup.add(line);
//                    console.log(cameraGroup);
//                    console.log(line);
//
//
//
//                    var dx = camera.position.x - 25;
//                    var dy = camera.position.y - 25;
//                    var dz = camera.position.z - 25;
//
//                    var distanceToMiddle = Math.sqrt(dx * dx + dy * dy + dz * dz);
//
//                    console.log(distanceToMiddle);



                }

                function sticlaAction() {
                    var grupu = scene.children[1];
                    var grupuchildren = grupu.children;
                    for (i = 0; i < 5; i++) {
                        var lampa = grupuchildren[i].children[1];
                        lampa.position.x -= 0.1;
                        var pointlight = lampa.children[0];
                        pointlight.intensity = 0.2;
                    }
                }


                function disrupter() {


                    console.log(scene);
                    var grupbaterie = scene.getObjectByName("grupBaterie");
                    grupbaterie.position.z += 5;


                }




                function load3Dmodels() {


                    var objectScale = 2;

                    var colladaLoader = new THREE.ColladaLoader();
                    //LOADING ORDER
                    //1. DISRUPTOR
                    //2. BATTERY
                    //3. BATTERYCASE
                    //4. SIPCA FILTRU
                    //5. STICLA FILTRU
                    //6. ECRAN 
                    //7. BUTON MARE
                    //8. BUTONMIC1
                    //9. BUTONMIC2
                    //10.FILET MECANISM BATERIE
                    //11.FILTE SIPCA
                    //12.LOGO EXTERN
                    colladaLoader.load('js/daes/MecanismTigara.dae', function colladaReady(collada) {
                        disruptor = collada.scene;
                        disruptorSkin = collada.skins[0];
                        disruptor.name = "disruptor";
                        group.add(disruptor);
                        disruptor.position.x = 0.1;

                    });
                    colladaLoader.load('js/daes/Baterie.dae', function colladaReady(collada) {
                        battery = collada.scene;
                        battery.name = "battery";
                        batterySkin = collada.skins[0];
                        grupBaterie.add(battery);
                        battery.position.z = 4;
                        battery.position.x = 3.5;
                    });
                    colladaLoader.load('js/daes/CapacBaterie.dae', function colladaReady(collada) {
                        batterySupport = collada.scene;
                        batterySupport.name = "batterySupport";
                        batterySupportSkin = collada.skins[0];
                        grupBaterie.add(batterySupport);
                        batterySupport.position.x = 5;
                        batterySupport.position.z = 0.3;
                    });
                    colladaLoader.load('js/daes/Sipca.dae', function colladaReady(collada) {
                        sipca = collada.scene;
//                        console.log(sipca);
//                        sipca.children[0] = null;
//                        console.log(sipca);
                        sipca.name = "filter";
                        sipcaSkin = collada.skins[0];
                        grupFiltru.add(sipca);
                        sipca.position.x = 1.5;

                    });
                    colladaLoader.load('js/daes/Sticla.dae', function colladaReady(collada) {
                        sticla = collada.scene;
                        sticla.name = "filterGlass";
                        sticlaSkin = collada.skins[0];
                        grupFiltru.add(sticla);
                        sticla.position.x = 1.5;
                    });
                    colladaLoader.load('js/daes/RamaEcran.dae', function colladaReady(collada) {
                        ecran = collada.scene;
                        ecran.name = "screen";
                        ecranSkin = collada.skins[0];
                        group.add(ecran);
                        ecran.scale.x = 1.05;
                        ecran.scale.y = 1.05;
                        ecran.scale.z = 1.05;
                        ecran.position.z = 4.5;
                        ecran.position.y = -0.15;
                        ecran.position.x = -4.75;
                    });
                    colladaLoader.load('js/daes/ButonMare.dae', function colladaReady(collada) {
                        startButton = collada.scene;
                        startButtonSkin = collada.skins[0];
                        startButton.name = "startButton";
                        group.add(startButton);
                        startButton.position.z = -4.05;
                        startButton.position.y = -0.05;
                        startButton.position.x = 1.5;

//                        console.log(startButton);
                    });
                    colladaLoader.load('js/daes/ButonMic1.dae', function colladaReady(collada) {
                        buttonSmall1 = collada.scene;
                        buttonSmall1.name = "smallButton1";
                        buttonSmall1Skin = collada.skins[0];
                        group.add(buttonSmall1);
                        buttonSmall1.position.z = -4.05;
                        buttonSmall1.position.y = -0.05;
                        buttonSmall1.position.x = 1.5;
                    });
                    colladaLoader.load('js/daes/ButonMic2.dae', function colladaReady(collada) {
                        buttonSmall2 = collada.scene;
                        buttonSmall2.name = "smallButton2";
                        buttonSmall2Skin = collada.skins[0];
                        group.add(buttonSmall2);
                        buttonSmall2.position.z = -4.05;
                        buttonSmall2.position.y = -0.05;
                        buttonSmall2.position.x = 1.5;
                    });
                    colladaLoader.load('js/daes/FiletMecanismBaterie.dae', function colladaReady(collada) {
                        batteryThread = collada.scene;
                        batteryThread.name = "batteryThread";
                        batteryThreadSkin = collada.skins[0];
                        grupFiltru.add(batteryThread);
                        batteryThread.position.x = 1.5;
                    });
                    colladaLoader.load('js/daes/Logo.dae', function colladaReady(collada) {
                        logo = collada.scene;
                        logo.name = "logo";
                        logoSkin = collada.skins[0];
                        grupBaterie.add(logo);
                        logo.position.x = 3;
                        logo.position.z = -4;
                        logo.position.y = -0.2;
                    });

                    grupFiltru.position.z = -28;
                    group.position.z = -20;
                    grupBaterie.position.z = -20;
                    grupFiltru.scale.x = 2;
                    grupFiltru.scale.y = 2;
                    grupFiltru.scale.z = 2;
                    group.scale.x = 2;
                    group.scale.y = 2;
                    group.scale.z = 2;
                    grupBaterie.scale.x = 2;
                    grupBaterie.scale.y = 2;
                    grupBaterie.scale.z = 2;




                }




                function basicColorize() {

                    var mecanism_tigara = scene.getObjectByName("mecanism_tigara");
                    var mecanism_tigara_mesh = mecanism_tigara.children[0];
                    var testMaterial = new THREE.MeshPhongMaterial({color: 0xFF2222, shininess: 8, specular: 0x555555, metal: false, side: THREE.DoubleSide});
                    mecanism_tigara_mesh.material = testMaterial;



                    var grupu = scene.getObjectByName("grupPrincipal");
                    var grupuchildren = grupu.children;

                    for (i = 0; i < 5; i++) {
                        var lampa = grupuchildren[i].children[1];
                        lampa.visible = true;
                        lampa.position.x -= 0.1;
                        var pointlight = lampa.children[0];
                        pointlight.intensity = 1;
                        pointlight.visible = true;
                    }




                    var filter_material = new THREE.MeshPhongMaterial({color: 0xCCCCCC, shininess: 50, specular: 0xAACCDD, metal: true, side: THREE.DoubleSide});
                    var filtru = scene.getObjectByName("filter");
                    var filter_mesh = scene.getObjectByName("Cylinder001").children[0];
                    filter_mesh.material = filter_material;


                    var glass_material = new THREE.MeshPhongMaterial({color: 0x777777, shininess: 10, specular: 0xDDDDDD, transparent: true, opacity: 0.5, side: THREE.DoubleSide});
                    var filter_glass = scene.getObjectByName("filterGlass");
                    var filter_glass_mesh = scene.getObjectByName("sticla001").children[0];
                    filter_glass_mesh.material = glass_material;

                    var buttonsMaterial = new THREE.MeshPhongMaterial({color: 0xDDDDFF, shininess: 30, specular: 0xEEEEEE, metal: true, side: THREE.DoubleSide});
                    var bigButton = scene.getObjectByName("startButton");
                    var bigButton_mesh = scene.getObjectByName("buton_mare").children[0];
                    bigButton_mesh.material = buttonsMaterial;

                    var smallButton1 = scene.getObjectByName("smallButton1");
                    var smallButton1_mesh = scene.getObjectByName("buton_mic_1").children[0];

                    var smallButton2 = scene.getObjectByName("smallButton2");
                    var smallButton2_mesh = scene.getObjectByName("buton_mic_2").children[0];
//                    console.log(smallButton2);
                    smallButton1_mesh.material = buttonsMaterial;
                    smallButton2_mesh.material = buttonsMaterial;

                    var rama_ecranMaterial = new THREE.MeshPhongMaterial({color: 0x9999AA, shininess: 10, specular: 0x7799AA, transparent: false, opacity: 0.5, side: THREE.DoubleSide});
                    var rama_ecran = scene.getObjectByName("screen");
                    var rama_ecran_mesh = scene.getObjectByName("rama_ecran").children[0];
                    rama_ecran_mesh.material = rama_ecranMaterial;
//                    console.log(ecran);

                }


                function displayDisruptorOptions() {


                    console.log("Disruptor Color Box Options");
                    var boxGeometry = new THREE.BoxGeometry(30, 30, 30, 30);
                    var redMaterial = new THREE.MeshPhongMaterial({color: 0xFF0000});
                    var greenMaterial = new THREE.MeshPhongMaterial({color: 0x00FF00});
                    var blueMaterial = new THREE.MeshPhongMaterial({color: 0x0000FF});
                    var boxRed = new THREE.Mesh(boxGeometry, redMaterial);
                    boxRed.name = "RedBox";
                    var boxGreen = new THREE.Mesh(boxGeometry, greenMaterial);
                    boxGreen.name = "GreenBox";
                    var boxBlue = new THREE.Mesh(boxGeometry, blueMaterial);
                    boxBlue.name = "BlueBox";
                    scene.add(boxRed);
                    scene.add(boxGreen);
                    scene.add(boxBlue);
                    boxRed.position.x = 450;
                    boxRed.position.z = 410;
                    boxRed.rotation.x = 0.5;
                    boxRed.rotation.y = 0.5;
                    boxGreen.position.x = 450;
                    boxGreen.position.z = 450;
                    boxGreen.rotation.x = 0.5;
                    boxGreen.rotation.y = 0.5;
                    boxBlue.position.x = 450;
                    boxBlue.position.z = 490;
                    boxBlue.rotation.x = 0.5;
                    boxBlue.rotation.y = 0.5;
                }










        </script>
    </body>
</html>
